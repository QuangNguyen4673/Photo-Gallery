{"version":3,"sources":["firebase.js","components/hooks/useFirestore.js","components/hooks/useGridDivide.js","components/ImageGrid.js","components/Modals.js","components/Title.js","components/hooks/useStorage.js","components/MyProgressBar.js","components/UploadForm.js","App.js","index.js"],"names":["firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","REACT_APP_MESSAGING_SENDER_ID","appId","projectStorage","storage","projectFirestore","firestore","timeStamp","FieldValue","serverTimestamp","useFirestore","collection","useState","docs","setDocs","useEffect","onSnapshot","snapshot","documents","forEach","doc","push","data","id","gridDivide","odd","even","gridOne","gridTwo","gridThree","length","console","log","item","obj","url","ImageGrid","setimgUrl","useGridDivide","imageRender","param","map","motion","div","className","img","src","alt","onClick","Modals","e","target","classList","value","initial","y","animate","Title","useStorage","file","progress","setProgress","setUrl","error","setError","storageRef","ref","name","storageCollection","put","on","snap","percentage","bytesTransferred","totalBytes","err","a","getDownloadURL","createdAt","add","MyProgressBar","setFile","width","UploadForm","type","onChange","myFile","files","includes","App","imgUrl","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8791370e.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\r\nimport \"firebase/firestore\";\r\nimport \"firebase/storage\";\r\n\r\nfirebase.initializeApp({\r\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\r\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\r\n  appId: process.env.REACT_APP_FIREBASE_APP_ID,\r\n});\r\n\r\nconst projectStorage = firebase.storage();\r\nconst projectFirestore = firebase.firestore();\r\nconst timeStamp = firebase.firestore.FieldValue.serverTimestamp;\r\n\r\nexport { projectFirestore, projectStorage, timeStamp };\r\n","import { useEffect, useState } from \"react\";\r\nimport { projectFirestore } from \"../../firebase\";\r\n\r\nfunction useFirestore(collection) {\r\n  const [docs, setDocs] = useState(null);\r\n  useEffect(() => {\r\n    const unsub = projectFirestore\r\n      .collection(collection)\r\n      .onSnapshot((snapshot) => {\r\n        let documents = [];\r\n        snapshot.forEach((doc) => {\r\n          documents.push({ ...doc.data(), id: doc.id });\r\n        });\r\n        setDocs(documents);\r\n      });\r\n    return unsub;\r\n  }, [collection]);\r\n  return { docs };\r\n}\r\n\r\nexport default useFirestore;\r\n","function gridDivide(docs) {\r\n  let gridOne = [],\r\n    gridTwo = [],\r\n    gridThree = [];\r\n  let num = 3;\r\n  let odd, even; // odd: số dư; even: thương chia hết\r\n  if (docs) {\r\n    if (docs.length % num !== 0) {\r\n      console.log(\"Không chia hết cho num\");\r\n      odd = docs.length % num;\r\n      even = (docs.length - odd) / num;\r\n      docs.forEach((item) => {\r\n        const { id, url } = item;\r\n        const obj = { id, url };\r\n        if (gridOne.length < even) {\r\n          gridOne.push(obj);\r\n        } else if (gridTwo.length < even) {\r\n          gridTwo.push(obj);\r\n        } else if (gridThree.length < even) {\r\n          gridThree.push(obj);\r\n        } else if (gridOne.length === even) {\r\n          gridOne.push(obj);\r\n        } else if (gridThree.length === even) {\r\n          gridThree.push(obj);\r\n        }\r\n      });\r\n    } else {\r\n      console.log(\"Chia hết cho num\");\r\n      even = docs.length / num;\r\n      docs.forEach((item) => {\r\n        const { id, url } = item;\r\n        const obj = { id, url };\r\n        if (gridOne.length < even) {\r\n          gridOne.push(obj);\r\n        } else if (gridTwo.length < even) {\r\n          gridTwo.push(obj);\r\n        } else {\r\n          gridThree.push(obj);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  return [gridOne, gridTwo, gridThree];\r\n}\r\nexport default gridDivide;\r\n","import useFirestore from \"./hooks/useFirestore\";\r\nimport useGridDivide from \"./hooks/useGridDivide\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nfunction ImageGrid({ setimgUrl }) {\r\n  const { docs } = useFirestore(\"images\");\r\n  const [gridOne, gridTwo, gridThree] = useGridDivide(docs);\r\n\r\n  const imageRender = (param) => {\r\n    return param.map((item) => (\r\n      <motion.div key={item.id} className=\"img-wraper\">\r\n        <motion.img\r\n          src={item.url}\r\n          alt=\"\\#\"\r\n          onClick={() => setimgUrl(item.url)}\r\n        />\r\n      </motion.div>\r\n    ));\r\n  };\r\n  return (\r\n    <>\r\n      {docs && (\r\n        <div className=\"image-grid-container\">\r\n          <div className=\"grid-one\">{imageRender(gridOne)}</div>\r\n          <div className=\"grid-two\">{imageRender(gridTwo)}</div>\r\n          <div className=\"grid-three\">{imageRender(gridThree)}</div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ImageGrid;\r\n","import { motion } from \"framer-motion\";\r\nfunction Modals({ url, setimgUrl }) {\r\n  const clickHandler = (e) => {\r\n    if (e.target.classList.value === \"img-modal\") {\r\n      setimgUrl(\"\");\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"img-modal\" onClick={clickHandler}>\r\n      <motion.img src={url} alt=\"\\#\" initial={{ y: -500 }} animate={{ y: 0 }} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Modals;\r\n","function Title() {\r\n  return (\r\n    <div className=\"title\">\r\n      <h2>Firegram</h2>\r\n      <h1>Your Picture</h1>\r\n      <div>Lorem ipsum dolor sit amet, consectetur adipiscing elit</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Title;\r\n","import { projectFirestore, projectStorage, timeStamp } from \"../../firebase\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\n\r\nfunction useStorage(file) {\r\n  const [progress, setProgress] = useState(null);\r\n  const [url, setUrl] = useState(null);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const storageRef = projectStorage.ref(file.name);\r\n    const storageCollection = projectFirestore.collection(\"images\");\r\n\r\n    storageRef.put(file).on(\r\n      \"state_changed\",\r\n      (snap) => {\r\n        let percentage = (snap.bytesTransferred / snap.totalBytes) * 100;\r\n        setProgress(percentage);\r\n      },\r\n      (err) => setError(err),\r\n      async () => {\r\n        const url = await storageRef.getDownloadURL();\r\n        const createdAt = timeStamp();\r\n        storageCollection.add({\r\n          url,\r\n          createdAt,\r\n        });\r\n        setUrl(url);\r\n      }\r\n    );\r\n  }, [file]);\r\n  return { progress, url, error };\r\n}\r\n\r\nexport default useStorage;\r\n","import React, { useEffect } from \"react\";\r\nimport useStorage from \"./hooks/useStorage\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nfunction MyProgressBar({ file, setFile }) {\r\n  const { progress, url } = useStorage(file);\r\n  useEffect(() => {\r\n    if (url) {\r\n      setFile(null);\r\n    }\r\n  }, [url, setFile]);\r\n  if (!progress) {\r\n    return \"\";\r\n  }\r\n  return (\r\n    <>\r\n      <div className=\"my-progress-bar\">\r\n        <motion.div\r\n          className=\"my-progress-bar-current\"\r\n          initial={{ width: 0 }}\r\n          animate={{ width: progress + \"%\" }}\r\n        ></motion.div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default MyProgressBar;\r\n","import { useState } from \"react\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport MyProgressBar from \"./MyProgressBar\";\r\n\r\nfunction UploadForm() {\r\n  const [file, setFile] = useState(null);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const changeHandler = (e) => {\r\n    const myFile = e.target.files[0];\r\n    const types = [\"image/png\", \"image/jpeg\"];\r\n    if (myFile && types.includes(myFile.type)) {\r\n      setFile(myFile);\r\n      setError(\"\");\r\n    } else {\r\n      setFile(null);\r\n      setError(\"Please select an image file (png or jpg)\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form className=\"img-upload\">\r\n      <label>\r\n        <input type=\"file\" onChange={changeHandler} />\r\n        <div className=\"icon-container\">\r\n          <AddIcon />\r\n        </div>\r\n      </label>\r\n      {error && <h5>{error}</h5>}\r\n      {file && <MyProgressBar file={file} setFile={setFile} />}\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default UploadForm;\r\n","import ImageGrid from \"./components/ImageGrid\";\r\nimport Modals from \"./components/Modals\";\r\nimport Title from \"./components/Title\";\r\nimport UploadForm from \"./components/UploadForm\";\r\nimport { useState } from \"react\";\r\nfunction App() {\r\n  const [imgUrl, setimgUrl] = useState(\"\");\r\n  return (\r\n    <>\r\n      <Title />\r\n      <UploadForm />\r\n      <ImageGrid setimgUrl={setimgUrl} />\r\n      {imgUrl && <Modals url={imgUrl} setimgUrl={setimgUrl} />}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"./components/assests/css/style.css\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}